{% extends "base.html" %}
{% block title %}{{ "Modifier" if action == "edit" else "Ajouter" }} un anniversaire{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <span class="card-title">{{ "Modifier" if action == "edit" else "Nouvel" }} anniversaire</span>
        <a href="/?date={{ date_anniv }}" class="btn btn-secondary btn-sm">Retour</a>
    </div>

    <form method="POST"
          action="{{ url_for('edit_birthday', birthday_id=birthday.id) if action == 'edit' else url_for('add_birthday') }}">

        <input type="hidden" name="date_anniv" value="{{ birthday.date_anniv if birthday else date_anniv }}">

        <!-- Date + Horaire -->
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Date</label>
                <input type="date" name="date_anniv" class="form-input"
                       value="{{ birthday.date_anniv if birthday else date_anniv }}" required>
            </div>
            <div class="form-group">
                <label class="form-label">Horaire</label>
                <input type="text" name="horaire" class="form-input" placeholder="14h00"
                       value="{{ birthday.horaire if birthday else '' }}">
            </div>
        </div>

        <!-- Prénom + Formule -->
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Prénom(s) *</label>
                <input type="text" name="prenom" class="form-input" required
                       placeholder="Ex : Gabriel   ou   Gabriel et Gustavo"
                       value="{{ birthday.prenom if birthday else '' }}">
            </div>
            <div class="form-group">
                <label class="form-label">Formule *</label>
                <select name="formule" class="form-select" required>
                    {% for f in formules %}
                    <option value="{{ f }}"
                        {{ 'selected' if birthday and birthday.formule == f }}>{{ f }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- Nb enfants + Animateur -->
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Nb enfants</label>
                <input type="text" name="nb_enfants" class="form-input" placeholder="12"
                       value="{{ birthday.nb_enfants if birthday else '' }}">
            </div>
            <div class="form-group">
                <label class="form-label">Animateur</label>
                <input type="text" name="animateur" class="form-input" placeholder="Lucas"
                       value="{{ birthday.animateur if birthday else '' }}">
            </div>
        </div>

        <!-- Boisson + Cadeau + Gâteau -->
        <div class="form-row-3">
            <div class="form-group">
                <label class="form-label">Boisson</label>
                <input type="text" name="boisson" class="form-input"
                       value="{{ birthday.boisson if birthday else '' }}">
            </div>
            <div class="form-group">
                <label class="form-label">Cadeau</label>
                <input type="text" name="cadeau" class="form-input"
                       value="{{ birthday.cadeau if birthday else '' }}">
            </div>
            <div class="form-group">
                <label class="form-label">Gâteau</label>
                <input type="text" name="gateau" class="form-input"
                       value="{{ birthday.gateau if birthday else '' }}">
            </div>
        </div>

        <!-- Options -->
        <div class="form-group">
            <label class="form-label">Options</label>
            <input type="text" name="options" class="form-input"
                   value="{{ birthday.options if birthday else '' }}">
        </div>

        <!-- Commentaires -->
        <div class="form-group">
            <label class="form-label">Commentaires</label>
            <textarea name="commentaires" class="form-input">{{ birthday.commentaires if birthday else '' }}</textarea>
        </div>

        <!-- Actions -->
        <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 16px;">
            <a href="/?date={{ date_anniv }}" class="btn btn-secondary">Annuler</a>
            <button type="submit" class="btn btn-primary">
                {{ "Enregistrer" if action == "edit" else "Ajouter" }}
            </button>
        </div>
    </form>
</div>
{% endblock %}
